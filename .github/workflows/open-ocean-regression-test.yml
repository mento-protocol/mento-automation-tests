name: "[Open-Ocean] Sequential Regression Test Run"

on:
  schedule:
    - cron: "0 8 * * 3" # Wednesday at 8:00 AM UTC
  workflow_dispatch:
    inputs:
      HTML_REPORT_GENERATION:
        type: choice
        description: "HTML report generation"
        default: "onFailure"
        options:
          - "true"
          - "false"
          - "onFailure"
      TESTOMAT_REPORT_GENERATION:
        type: choice
        description: "Testomat test run report generation"
        default: "true"
        options:
          - "true"
          - "false"

jobs:
  test:
    name: "[Open-Ocean] Sequential Regression Test Run"
    uses: ./.github/workflows/re-usable-test.yml
    with:
      APP_NAME: "open-ocean"
      ENV: "prod"
      SPECS_REGEX: "@regression"
      IS_PARALLEL_RUN: "false"
      IS_MAINNET: "true"
      IS_FORK: "false"
      HTML_REPORT_GENERATION: ${{ inputs.HTML_REPORT_GENERATION || 'onFailure' }}
      HTML_REPORT_NAME: "open-ocean-sequential-regression"
      TESTOMAT_REPORT_GENERATION: ${{ inputs.TESTOMAT_REPORT_GENERATION || 'true' }}
      TESTOMATIO_TITLE: "[Open-Ocean] Sequential-Regression"
      NOTIFICATION_MESSAGE: "[Open-Ocean] Sequential-Regression"
    secrets: inherit
